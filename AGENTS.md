# Repository Guidelines

## Project Structure & Module Organization
- `dut/`: Verilog solutions named `dut_###.v`, each exposing `top_module` to match HDLBits prompts. Keep one exercise per file and mirror the HDLBits numbering.
- `tb/`: Verilator C++ testbenches (`tb_###.cpp`). Add a matching testbench when you introduce a new DUT; reuse the `Vdut_###` naming generated by Verilator.
- `build/`: Generated artifacts from Verilator builds (do not commit). Each `tb_###` gets its own subdirectory.
- `coverage/`: Coverage output per DUT. Safe to recreate; clean with `make clean`.
- `Makefile`: Automation entry point; extend targets when adding new DUT/testbench pairs.

## Build, Test, and Development Commands
- `make` or `make run_tb DUT=001`: Build and run `dut_001` with `tb_001`; coverage is always generated to `coverage/dut_001/coverage.dat`.
- `VERILATOR=/path/to/verilator make run_tb DUT=042`: Use a specific Verilator binary for another DUT.
- `make coverage_report COV_DAT=coverage/dut_042/coverage.dat COV_INFO=coverage/dut_042/coverage.info COV_ANNOTATE_DIR=coverage/dut_042/annotate`: Re-run coverage reporting (already invoked by `run_tb` after execution).
- `make clean`: Remove `build/`, `coverage/`, and `.dat/.info` coverage artifacts.

## Coding Style & Naming Conventions
- Verilog-2001 subset; prefer 2-space indentation, aligned port lists, and descriptive intermediate wires/regs (`w1/w2` acceptable when schematic-driven).
- Name solution files `dut_###.v` and top module `top_module`; keep signal names consistent with HDLBits statements for clarity when grading.
- Avoid tabs; keep lines short and combinational logic simple. Comment only for non-obvious constructs (e.g., `$bits`, generate loops).

## Testing Guidelines
- Use Verilator; add a `tb_###.cpp` per DUT and rely on `make run_tb DUT=###` to compile, run, and emit coverage via `VERILATOR_COV_FILE`.
- Keep tests deterministic—no randomization or delays. When adding waveforms, gate tracing behind flags to keep default runs fast.
- Always run with coverage (default behavior) and ensure failures exit non-zero with a concise reason.
- Target 100% coverage: each input must toggle 0→1 and 1→0 (and relevant branches exercise accordingly) so Verilator reports 100% in `coverage/dut_##/coverage.info`.

## Commit & Pull Request Guidelines
- Commit messages: short, imperative, and reference the exercise ID when possible (e.g., `add dut_042 mux tree` or `tb_010: add coverage check`).
- For PRs, describe the HDLBits problem solved, note any new Makefile targets, and mention coverage status. Attach logs of `make run_tb_###` if tests are new or changed.
- Keep diffs focused: one DUT (and its test) per PR is preferred to simplify review.
